<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Your Diary Entries</title>
  <link rel="stylesheet" href="diaryappstyle.css" />
</head>
<body>
  <h1>Your Diary Entries</h1>
  <nav>
    <a href="home.html">Home</a>
    <a href="new.html">New Entry</a>
    <a href="entries.html">View Entries</a>
    <a href="about.html">About</a>
  </nav>

  <div id="entriesContainer"></div>

  <script>
    document.addEventListener("DOMContentLoaded", () => {
      const container = document.getElementById("entriesContainer");
      let entries = JSON.parse(localStorage.getItem("entries")) || [];

      function saveEntries() {
        localStorage.setItem("entries", JSON.stringify(entries));
      }

      function renderEntries() {
        container.innerHTML = "";
        if (entries.length === 0) {
          container.innerHTML = "<p>No entries yet.</p>";
          return;
        }

        entries.forEach((entry, index) => {
          const entryDiv = document.createElement("div");
          entryDiv.classList.add("entry");
          entryDiv.innerHTML = `
            <h2 contenteditable="false">${entry.title}</h2>
            <p contenteditable="false">${entry.content}</p>
            <small>${entry.timestamp}</small><br>
            <button onclick="editEntry(${index}, this)">Edit</button>
            <button onclick="deleteEntry(${index})">Delete</button>
          `;
          container.appendChild(entryDiv);
        });
      }

      window.editEntry = function(index, button) {
        const entryDiv = container.children[index];
        const titleEl = entryDiv.querySelector("h2");
        const contentEl = entryDiv.querySelector("p");

        if (button.innerText === "Edit") {
          titleEl.contentEditable = true;
          contentEl.contentEditable = true;
          titleEl.focus();
          button.innerText = "Save";
        } else {
          entries[index].title = titleEl.innerText;
          entries[index].content = contentEl.innerText;
          entries[index].timestamp = new Date().toLocaleString();
          saveEntries();
          renderEntries();
        }
      };

      window.deleteEntry = function(index) {
        if (confirm("Are you sure you want to delete this entry?")) {
          entries.splice(index, 1);
          saveEntries();
          renderEntries();
        }
      };

      renderEntries();
    });
  </script>
</body>
</html>